# ReparePE
一个PE文件修复工程。一个简单的工程。
在我工作中，经常要看各种乱七八糟的用户现场，
既然看用户现场，免不了做攻防对抗，或者调试相关的事情，
既然做这种相关的事情，那么就免不了找几个看似可疑的恶意代码块，
既然找到了恶意代码块，这就有两种情况，一种是纯ShellCode，
另一种是内存PE文件（包括EXE、DLL、SYS 等）。
如果是内存PE文件，如果用IDA直接分析的话，IDA会直接把它当成一个BIN 来分析，
这样缺点就是很多关键信息，或者符号信息、函数的调用信息都无法清晰看到。
而当前代码块就是为了解决这个痛点而出现的。
在我的分析过程中，SYS 文件的分析比较多，
当前工具可以最起码根据MZ头和PE头简单地恢复SYS 文件的各个区段，
然后寻找到重定位表，恢复SYS 文件的重定位信息，起码让IDA 可识别，这样我分析起来也方便。
目前只支持32位程序，理论上来说，EXE 不需要修复重定位表，DLL 和SYS 的重定位表修复方法相同，
所以当前工具在修复重定位表上，实际上是可用的，并且很好用。
目前还有几个地方没有弄，就是：1 ，导入表没有修复，因为我目前没有这个需求，所以就没写，
一个驱动如果导入表坏掉了，那我dump它出来之后，修复的难度也不低，
如果INT 表没有坏，还好说，如果INT 表都坏了的话，那么我还要去目标系统中找到那些个函数地址，
全部便利一遍，才能得到完整地IAT ，难度较高，（DLL 、EXE 部分导入表修复同理）。
2 ，导出表没有修复，同样是我没有这个需求，因为我分析的大部分都是驱动文件，
也没有什么函数需要导出的，都是恶意软件，主要分析功能，所以这块可以不做。
等以后有需求的时候，把这两块补全，然后再重新提交一下。